<%inherit file="base.html"/>
<%block name="title">aGoControl Data Page</%block>
    <style>
        label, input { display:block; }
        input.text { margin-bottom:12px; width:95%; padding: .4em; }
        fieldset { padding:0; border:0; margin-top:25px; }
        h1 { font-size: 1.2em; margin: .6em 0; }
        div#users-contain { width: 350px; margin: 20px 0; }
        div#users-contain table { margin: 1em 0; border-collapse: collapse; width: 100%; }
        div#users-contain table td, div#users-contain table th { border: 1px solid #eee; padding: .6em 10px; text-align: left; }
        .ui-dialog .ui-state-error { padding: .3em; }
        .validateTips { border: 1px solid transparent; padding: 0.3em; }
    </style>
 
<div id="rooms-contain" class="ui-widget">
    <h1>${device['roomname']} ${environment.title()}</h1>

    <p>
	    Sensor: ${device['name']} <br/>
	    Unit:  ${data["unit"]} <br/>
	    Period: ${begin} - ${end}
    </p>

    <div id="placeholder" style="width:910px;height:300px;margin-left: 10px; margin-top: 40px; margin-bottom: 40px;"></div>
	
    <table id="rooms" class="ui-widget ui-widget-content">
        <thead>
            <tr class="ui-widget-header ">
                <th>Time</th>
                <th>Value [${data["unit"]}]</th>
		<th></th>
            </tr>
        </thead>
        <tbody>
	    % for key in sorted(data["values"].keys(), reverse=True):
            <tr>
                <td width = "150px" align="center">${key}</td>
                <td align="right">${data["values"][key][0]}</td>
		<td></td>
            </tr>
	    % endfor
        </tbody>
    </table>
</div>

<script type="text/javascript">
$(function () {
    var d1 = [];
    % for key in sorted(data["values"].keys()):
    d1.push([Date.parse("${key}".replace(" ","T")),${data["values"][key][0]}]);
    % endfor
	
    $.plot($("#placeholder"), [ d1 ], { xaxis: { mode: "time", timeformat: "%y-%0m-%0d"} });
});
</script>


